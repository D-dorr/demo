<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			*{margin: 0; padding: 0;}
			.hide{ display: none;}
			.box1{ width: 400px; height: 250px; position: relative; top:100px; left:100px}
			.box1 img{ width: 100%; height: 100%;}
			.box1 span{ position: absolute; width: 100px; height: 100px; background: red; opacity: .3;top:0; left:0; cursor: move;}
			
			.box2{ width:300px; height: 300px; overflow: hidden; position:absolute; top:100px; left:550px}
			
			.box2 img{ position: absolute;}
			
		</style>
	</head>
	<body>
		<div class="box1">
			<img src="01.jpg">
			<span class="hide"></span>
		</div>
		
		<div class="box2 hide"><img src="01.jpg"></div>
		
	</body>
</html>
<script src="jquery-1.11.3.min.js"></script>

<script>
	var oSpan=$('.box1 span');
	
	$('.box1').mousemove(function(ev){
		oSpan.show();
		$(".box2").show();
		
		var l=ev.pageX-$(this).offset().left-oSpan.width()/2;
		var t=ev.pageY-$(this).offset().top-oSpan.height()/2;
		
		//限制范围
		if(l<0){
			l=0
		};
		
		if(t<0){
			t=0
		};
		
		//最大移动距离   盒子宽度--span宽度
		
		var max_l=$(this).width()-oSpan.width();
		var max_t=$(this).height()-oSpan.height();
		
		if(l>max_l){
			l=max_l;
		};
		
		if(t>max_t){
			t=max_t
		};
		
		oSpan.css({"left":l,"top":t});
		
		//移动大图片
		$('.box2 img').css({"left":-l*3,"top":-t*3});
		
	});
	
	
	$('.box1').mouseleave(function(){
		oSpan.hide();
		$(".box2").hide();
	})
	
	
	
</script>
